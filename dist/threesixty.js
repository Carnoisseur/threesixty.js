!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ThreeSixty=t():e.ThreeSixty=t()}(self,(()=>(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function s(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,r(e,t,"get"))}function o(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,r(e,t,"set"),i),i}function r(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}e.d(t,{default:()=>x});var a=new WeakMap,h=new WeakMap,u=new WeakMap,c=function(){function t(e,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,a,{writable:!0,value:null}),n(this,h,{writable:!0,value:null}),n(this,u,{writable:!0,value:null}),o(this,h,i),o(this,u,{container:{mousedown:function(e){return o(r,a,e.pageX)},touchstart:function(e){return o(r,a,e.touches[0].clientX)},touchend:function(){return o(r,a,null)}},prev:{mousedown:function(t){t.preventDefault(),e.play(!0)},mouseup:function(t){t.preventDefault(),e.stop()},touchstart:function(t){t.preventDefault(),e.prev()}},next:{mousedown:function(t){t.preventDefault(),e.play()},mouseup:function(t){t.preventDefault(),e.stop()},touchstart:function(t){t.preventDefault(),e.next()}},global:{mouseup:function(){return o(r,a,null)},mousemove:function(t){s(r,a)&&Math.abs(s(r,a)-t.pageX)>s(r,h).dragTolerance&&(e.stop(),s(r,a)>t.pageX?e.prev():e.next(),o(r,a,t.pageX))},touchmove:function(t){s(r,a)&&Math.abs(s(r,a)-t.touches[0].clientX)>s(r,h).swipeTolerance&&(e.stop(),s(r,a)>t.touches[0].clientX?e.prev():e.next(),o(r,a,t.touches[0].clientX))},keydown:function(t){[37,39].includes(t.keyCode)&&e.play(37===t.keyCode)},keyup:function(t){[37,39].includes(t.keyCode)&&e.stop()}}}),this._initEvents()}var r,c;return r=t,(c=[{key:"destroy",value:function(){s(this,h).swipeTarget.removeEventListener("mousedown",s(this,u).container.mousedown),s(this,h).swipeTarget.removeEventListener("touchstart",s(this,u).container.touchstart),s(this,h).swipeTarget.removeEventListener("touchend",s(this,u).container.touchend),e.g.removeEventListener("mouseup",s(this,u).global.mouseup),e.g.removeEventListener("mousemove",s(this,u).global.mousemove),e.g.removeEventListener("touchmove",s(this,u).global.touchmove),e.g.removeEventListener("keydown",s(this,u).global.keydown),e.g.removeEventListener("keyup",s(this,u).global.keyup),s(this,h).prev&&(s(this,h).prev.removeEventListener("mousedown",s(this,u).prev.mousedown),s(this,h).prev.removeEventListener("mouseup",s(this,u).prev.mouseup),s(this,h).prev.removeEventListener("touchstart",s(this,u).prev.touchstart)),s(this,h).next&&(s(this,h).next.removeEventListener("mousedown",s(this,u).next.mousedown),s(this,h).next.removeEventListener("mouseup",s(this,u).next.mouseup),s(this,h).next.removeEventListener("touchstart",s(this,u).next.touchstart))}},{key:"_initEvents",value:function(){s(this,h).draggable&&(s(this,h).swipeTarget.addEventListener("mousedown",s(this,u).container.mousedown),e.g.addEventListener("mouseup",s(this,u).global.mouseup),e.g.addEventListener("mousemove",s(this,u).global.mousemove)),s(this,h).swipeable&&(s(this,h).swipeTarget.addEventListener("touchstart",s(this,u).container.touchstart),s(this,h).swipeTarget.addEventListener("touchend",s(this,u).container.touchend),e.g.addEventListener("touchmove",s(this,u).global.touchmove)),s(this,h).keys&&(e.g.addEventListener("keydown",s(this,u).global.keydown),e.g.addEventListener("keyup",s(this,u).global.keyup)),s(this,h).prev&&(s(this,h).prev.addEventListener("mousedown",s(this,u).prev.mousedown),s(this,h).prev.addEventListener("mouseup",s(this,u).prev.mouseup),s(this,h).prev.addEventListener("touchstart",s(this,u).prev.touchstart)),s(this,h).next&&(s(this,h).next.addEventListener("mousedown",s(this,u).next.mousedown),s(this,h).next.addEventListener("mouseup",s(this,u).next.mouseup),s(this,h).next.addEventListener("touchstart",s(this,u).next.touchstart))}}])&&i(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),t}();const l=c;function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,i){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,i)}function d(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,w(e,t,"get"))}function f(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,w(e,t,"set"),i),i}function w(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var g=new WeakMap,y=new WeakMap,m=new WeakMap,b=new WeakMap,k=new WeakMap,E=new WeakMap,L=new WeakMap;const x=function(){function t(e,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,g,{writable:!0,value:null}),v(this,y,{writable:!0,value:0}),v(this,m,{writable:!0,value:null}),v(this,b,{writable:!0,value:!1}),v(this,k,{writable:!0,value:null}),v(this,E,{writable:!0,value:null}),v(this,L,{writable:!0,value:!1}),this.container=e,f(this,g,Object.assign({width:300,height:300,aspectRatio:0,count:0,perRow:0,speed:100,dragTolerance:10,swipeTolerance:10,draggable:!0,swipeable:!0,keys:!0,inverted:!1},i)),d(this,g).swipeTarget=d(this,g).swipeTarget||this.container,f(this,L,!Array.isArray(d(this,g).image)),this.sprite||(d(this,g).count=d(this,g).image.length),Object.freeze(d(this,g)),f(this,E,new l(this,d(this,g))),this._windowResizeListener=this._windowResizeListener.bind(this),this._initContainer(),this.nloops=0}var i,n;return i=t,(n=[{key:"isResponsive",get:function(){return d(this,g).aspectRatio>0}},{key:"containerWidth",get:function(){return this.isResponsive?this.container.clientWidth:d(this,g).width}},{key:"containerHeight",get:function(){return this.isResponsive?this.container.clientWidth*d(this,g).aspectRatio:d(this,g).height}},{key:"index",get:function(){return d(this,y)}},{key:"looping",get:function(){return d(this,b)}},{key:"sprite",get:function(){return d(this,L)}},{key:"next",value:function(){this.goto(d(this,g).inverted?d(this,y)-1:d(this,y)+1)}},{key:"prev",value:function(){this.goto(d(this,g).inverted?d(this,y)+1:d(this,y)-1)}},{key:"goto",value:function(e){f(this,y,(d(this,g).count+e)%d(this,g).count),this._update()}},{key:"play",value:function(e,t){this.looping||(this._loop(e),f(this,b,!0),f(this,k,t),this.nloops=0)}},{key:"stop",value:function(){this.looping&&(e.g.clearTimeout(d(this,m)),f(this,b,!1),f(this,k,null),this.nloops=0)}},{key:"toggle",value:function(e){this.looping?this.stop():this.play(e)}},{key:"destroy",value:function(){this.stop(),d(this,E).destroy(),this.container.style.width="",this.container.style.height="",this.container.style.backgroundImage="",this.container.style.backgroundPositionX="",this.container.style.backgroundPositionY="",this.container.style.backgroundSize="",this.isResponsive&&window.removeEventListener("resize",this._windowResizeListener)}},{key:"_loop",value:function(t){var i=this;t?this.prev():this.next(),0==d(this,y)&&(this.nloops+=1,d(this,k)&&this.nloops>=d(this,k))?this.stop():f(this,m,e.g.setTimeout((function(){i._loop(t)}),d(this,g).speed))}},{key:"_update",value:function(){this.sprite?(this.container.style.backgroundPositionX=-d(this,y)%d(this,g).perRow*this.containerWidth+"px",this.container.style.backgroundPositionY=-Math.floor(d(this,y)/d(this,g).perRow)*this.containerHeight+"px"):this.container.style.backgroundImage='url("'.concat(d(this,g).image[d(this,y)],'")')}},{key:"_windowResizeListener",value:function(){this.container.style.height=this.containerHeight+"px",this._update()}},{key:"_initContainer",value:function(){if(this.isResponsive||(this.container.style.width=this.containerWidth+"px"),this.container.style.height=this.containerHeight+"px",this.sprite){this.container.style.backgroundImage='url("'.concat(d(this,g).image,'")');var e=d(this,g).perRow,t=Math.ceil(d(this,g).count/d(this,g).perRow);this.container.style.backgroundSize=100*e+"% "+100*t+"%"}this.isResponsive&&window.addEventListener("resize",this._windowResizeListener),this._update()}}])&&p(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();return t.default})()));